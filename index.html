<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="zh-Hant"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1">&lt;meta charset="UTF-8"&gt;</p>
<p class="p1">&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1">&lt;title&gt;å­—è©åœ°é¼ æˆ°&lt;/title&gt;</p>
<p class="p1">&lt;!-- å¼•å…¥ Tailwind CSS æ–¹ä¾¿å¿«é€Ÿç¾åŒ–ä»‹é¢ --&gt;</p>
<p class="p1">&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1">&lt;!-- å¼•å…¥ Tone.js ç”¨æ–¼ç”ŸæˆéŸ³æ•ˆ --&gt;</p>
<p class="p1">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.min.js"&gt;&lt;/script&gt;</p>
<p class="p1">&lt;!-- æ–°å¢ï¼šå¼•å…¥ SheetJS ç”¨æ–¼è™•ç† Excel --&gt;</p>
<p class="p1">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"&gt;&lt;/script&gt;</p>
<p class="p1">&lt;style&gt;</p>
<p class="p1">/* è‡ªè¨‚å­—é«”èˆ‡åŸºæœ¬æ¨£å¼ */</p>
<p class="p1">body {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>font-family: 'KaiTi', 'BiauKai', 'DFKai-sb', 'æ¨™æ¥·é«”', sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>background-color: #87CEEB; /* å¤©è—è‰²èƒŒæ™¯ */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>-webkit-user-select: none; /* Safari */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>-ms-user-select: none; /* IE 10+ */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>user-select: none; /* Standard syntax */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>overflow: hidden;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>position: relative;</p>
<p class="p1">}</p>
<p class="p1">/* æ–°å¢ï¼šå¯æ„›çš„èƒŒæ™¯å…ƒç´  */</p>
<p class="p1">body::before {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>content: '';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>top: 10%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>left: 10%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>width: 80px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>height: 40px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>background: #fff;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>border-radius: 50px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>opacity: 0.9;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>box-shadow: 20px 8px 0 0 #fff, 180px 40px 0 5px #fff, 220px 30px 0 0 #fff, 300px 50px 0 3px #fff, -80px 80px 0 0 #fff;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>animation: clouds 80s linear infinite;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>z-index: -1;</p>
<p class="p1">}</p>
<p class="p1">@keyframes clouds {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>from { transform: translateX(-150%); }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>to { transform: translateX(150%); }</p>
<p class="p1">}</p>
<p class="p1">body::after {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>content: '';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>bottom: 0;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>height: 100px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>background: url('data:image/svg+xml;utf8,&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80"&gt;&lt;path d="M0 80 H 80 V 40 C 60 40, 60 60, 40 60 C 20 60, 20 40, 0 40 Z" fill="%234CAF50"/&gt;&lt;/svg&gt;');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>background-size: 80px 80px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>background-repeat: repeat-x;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>z-index: -1;</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* éŠæˆ²å®¹å™¨ï¼Œç¢ºä¿ç½®ä¸­ */</p>
<p class="p1">.game-container {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>max-width: 500px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>margin: auto;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>padding: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>z-index: 1;</p>
<p class="p1">}</p>
<p class="p1">/* åœ°æ´çš„æ¨£å¼ */</p>
<p class="p1">.hole {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>width: 100px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>height: 100px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>background-image: url('data:image/svg+xml;utf8,&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 50"&gt;&lt;path d="M0 50 C 20 20, 80 20, 100 50 Z" fill="%23A0522D" /&gt;&lt;ellipse cx="50" cy="45" rx="48" ry="8" fill="%238B4513" /&gt;&lt;/svg&gt;');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>background-size: 110% 100px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>background-position: center bottom;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>background-repeat: no-repeat;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>overflow: hidden; /* ä¿®æ”¹ï¼šå°‡ overflow è¨­ç‚º hiddenï¼Œè—ä½å‹•ç‰© */</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* å‹•ç‰©çš„å®¹å™¨æ¨£å¼ */</p>
<p class="p1">.animal-container {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>bottom: 5px; /* å†æ¬¡èª¿æ•´ä½ç½®ï¼Œè®“å‹•ç‰©æ›´æ·±å…¥æ´å£ */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>left: 50%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>transform: translateX(-50%) translateY(100%);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>transition: transform 0.2s ease-out;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>width: 90px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>height: 90px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>align-items: flex-end;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>z-index: 5;</p>
<p class="p1">}</p>
<p class="p1">/* å‹•ç‰©å†’å‡ºä¾†çš„ç‹€æ…‹ */</p>
<p class="p1">.animal-container.up {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>transform: translateX(-50%) translateY(0);</p>
<p class="p1">}</p>
<p class="p1">/* å‹•ç‰©SVGæ¨£å¼ */</p>
<p class="p1">.animal-svg {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>transition: transform 0.2s ease-in;</p>
<p class="p1">}</p>
<p class="p1">/* å‹•ç‰©ä¸Šçš„æ–‡å­— */</p>
<p class="p1">.character {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>font-size: 44px; /* åŠ å¤§å­—é«” */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>color: #331C00; /* åŠ æ·±é¡è‰²ä»¥å¢åŠ å°æ¯”åº¦ */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>text-shadow: 0px 0px 5px rgba(255,255,255,0.8); /* æ–°å¢æ–‡å­—å¤–é™°å½±ï¼Œæ›´æ¸…æ™° */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>background-color: rgba(255, 248, 225, 0.85); /* èª¿æ•´èƒŒæ™¯è‰² */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>border-radius: 50%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>width: 60px; /* åŠ å¤§åœ“åœˆ */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>height: 60px; /* åŠ å¤§åœ“åœˆ */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>margin-bottom: 10px; /* ç¸®çŸ­èˆ‡å‹•ç‰©é ­çš„è·é›¢ */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>z-index: 10;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>transform: scale(0);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>transition: transform 0.2s ease-out;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>border: 2px solid rgba(255, 255, 255, 0.9); /* æ–°å¢é‚Šæ¡† */</p>
<p class="p1">}</p>
<p class="p1">.animal-container.up .character {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>transform: scale(1);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>transition-delay: 0.05s;</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* æ•²æ“Šå‹•ç•« */</p>
<p class="p1">.whacked .animal-svg {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>transform: rotate(20deg) scale(0.9);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>opacity: 0;</p>
<p class="p1">}</p>
<p class="p1">.whacked::after {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>content: 'â­ï¸';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>top: 10px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>font-size: 30px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>animation: bonk 0.3s ease-out forwards;</p>
<p class="p1">}</p>
<p class="p1">@keyframes bonk {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>0% { transform: scale(0.5); opacity: 1; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>100% { transform: scale(1.5); opacity: 0; }</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* éŒ˜å­å‹•ç•« */</p>
<p class="p1">.hammer {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>top: -40px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>left: 30px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>width: 80px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>height: 80px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>pointer-events: none;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>z-index: 50;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>animation: hammer-swing 0.4s ease-out forwards;</p>
<p class="p1">}</p>
<p class="p1">@keyframes hammer-swing {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>0% { transform: rotate(60deg) scale(0.8); opacity: 0; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>30% { transform: rotate(30deg) scale(1); opacity: 1; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>60% { transform: rotate(-30deg) translate(20px, 40px); }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>100% { transform: rotate(-30deg) translate(20px, 40px); opacity: 0; }</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* åˆ†æ•¸è·³å‹•å‹•ç•« */</p>
<p class="p1">.score-pop {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>animation: pop 0.3s ease-out;</p>
<p class="p1">}</p>
<p class="p1">@keyframes pop {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>50% { transform: scale(1.3); }</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* åˆ†æ•¸å½ˆå‡ºå‹•ç•« */</p>
<p class="p1">.score-popup {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>top: 50%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>left: 50%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>transform: translate(-50%, -50%);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>font-size: 24px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>animation: floatUp 0.8s ease-out forwards;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>pointer-events: none;</p>
<p class="p1">}</p>
<p class="p1">@keyframes floatUp {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>100% { transform: translate(-50%, -150%) scale(1.2); opacity: 0; }</p>
<p class="p1">}</p>
<p class="p1">/* è¨­ç½®å½ˆçª—çš„é®ç½©å±¤ */</p>
<p class="p1">.modal-overlay {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>top: 0;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>background-color: rgba(0, 0, 0, 0.5);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>z-index: 1000;</p>
<p class="p1">}</p>
<p class="p1">/* æŠ€èƒ½æŒ‰éˆ•æ¨£å¼ */</p>
<p class="p1">.skill-btn {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>background-color: #10B981;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>padding: 8px 16px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>border-radius: 8px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>transition: all 0.2s;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>box-shadow: 0 4px #059669;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>border: none;</p>
<p class="p1">}</p>
<p class="p1">.skill-btn:disabled {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>background-color: #9CA3AF;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>color: #E5E7EB;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>cursor: not-allowed;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>box-shadow: 0 4px #6B7280;</p>
<p class="p1">}</p>
<p class="p1">.skill-btn:active:not(:disabled) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>transform: translateY(2px);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>box-shadow: 0 2px #059669;</p>
<p class="p1">}</p>
<p class="p1">/* è®€å–ä¸­çš„ spinner */</p>
<p class="p1">.loader {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>border: 4px solid #f3f3f3;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>border-radius: 50%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>border-top: 4px solid #3498db;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>width: 24px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>height: 24px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>animation: spin 1s linear infinite;</p>
<p class="p1">}</p>
<p class="p1">@keyframes spin {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>0% { transform: rotate(0deg); }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>100% { transform: rotate(360deg); }</p>
<p class="p1">}</p>
<p class="p1">/* è‡ªå®šç¾©é¡Œåº«æ¨£å¼ */</p>
<p class="p1">#custom-library-list {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>max-height: 150px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>overflow-y: auto;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>border: 1px solid #e2e8f0;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>border-radius: 0.375rem;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>padding: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>text-align: left;</p>
<p class="p1">}</p>
<p class="p1">&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body class="flex items-center justify-center min-h-screen"&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;div class="game-container text-center"&gt;</p>
<p class="p1">&lt;h1 class="text-4xl font-bold text-slate-700 mb-4" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.2);"&gt;å­—è©åœ°é¼ æˆ°&lt;/h1&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;!-- éŠæˆ²ä¸»ç•«é¢ --&gt;</p>
<p class="p1">&lt;div id="game-screen" class="hidden relative"&gt;</p>
<p class="p1">&lt;!-- é ‚éƒ¨æ§åˆ¶æ¬„ --&gt;</p>
<p class="p1">&lt;div class="flex justify-between items-center mb-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;h2 id="game-mode-title" class="text-xl font-bold text-slate-700"&gt;éŠæˆ²ä¸­&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;button id="save-quit-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg text-sm transition"&gt;é›¢é–‹éŠæˆ²&lt;/button&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p1">&lt;!-- éŠæˆ²è³‡è¨Šæ¬„ --&gt;</p>
<p class="p1">&lt;div class="flex justify-around items-center bg-sky-100 rounded-lg p-3 mb-4 shadow-md border-2 border-sky-300"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div&gt;&lt;p class="text-lg text-slate-600"&gt;ç›®æ¨™å­—&lt;/p&gt;&lt;p id="target-char" class="text-5xl font-bold text-sky-600"&gt;å¤ª&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div&gt;&lt;p class="text-lg text-slate-600"&gt;åˆ†æ•¸&lt;/p&gt;&lt;p id="score" class="text-3xl font-bold text-green-600"&gt;0&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div id="timer-display"&gt;&lt;p class="text-lg text-slate-600"&gt;æ™‚é–“&lt;/p&gt;&lt;p id="timer" class="text-3xl font-bold text-red-600"&gt;60&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div id="combo-display"&gt;&lt;p class="text-lg text-slate-600"&gt;é€£æ“Š&lt;/p&gt;&lt;p id="combo" class="text-3xl font-bold text-orange-500"&gt;0&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div id="hits-display"&gt;&lt;p class="text-lg text-slate-600"&gt;å‘½ä¸­&lt;/p&gt;&lt;p id="hits" class="text-3xl font-bold text-blue-600"&gt;0 / 3&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;!-- æŠ€èƒ½æ¬„ --&gt;</p>
<p class="p1">&lt;div id="skills-bar" class="flex justify-center space-x-4 mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;button id="skill-slow" class="skill-btn" disabled&gt;ğŸ¢ æ¸›é€Ÿ (&lt;span id="skill-slow-tokens"&gt;0&lt;/span&gt;)&lt;/button&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;!-- éŠæˆ²ä¹å®®æ ¼ --&gt;</p>
<p class="p1">&lt;div id="game-board" class="grid grid-cols-3 gap-4 md:gap-6 relative justify-items-center"&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;!-- é–‹å§‹ç•«é¢ --&gt;</p>
<p class="p1">&lt;div id="start-screen" class="p-6 bg-white rounded-xl shadow-lg relative"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;button id="settings-btn" class="absolute top-4 right-4 text-slate-500 hover:text-slate-800 transition"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"&gt;&lt;circle cx="12" cy="12" r="3"&gt;&lt;/circle&gt;&lt;path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"&gt;&lt;/path&gt;&lt;/svg&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div id="user-selection-view"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;h2 class="text-2xl font-bold text-slate-800 mb-4"&gt;é¸æ“‡å­¸ç”Ÿ&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;select id="user-select" class="w-full p-2 border border-slate-300 rounded-md mb-3"&gt;&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="flex space-x-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;input type="text" id="new-user-name" placeholder="è¼¸å…¥æ–°å­¸ç”Ÿå§“å" class="flex-grow p-2 border border-slate-300 rounded-md"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;button id="add-user-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition"&gt;æ–°å¢&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;button id="confirm-user-btn" class="w-full mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition"&gt;ç¢ºå®š&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div id="main-menu-view" class="hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;h2 class="text-2xl font-bold text-slate-800 mb-2"&gt;ä¸»é¸å–®&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;p class="text-lg text-slate-600 mb-4"&gt;æ­¡è¿, &lt;span id="current-user-name" class="font-bold"&gt;&lt;/span&gt;!&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="flex flex-col space-y-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;button id="practice-mode-btn" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition"&gt;é—–é—œç·´ç¿’&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;button id="timed-mode-btn" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition"&gt;è¨ˆæ™‚æ¯”è³½&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;p class="text-slate-500 mt-4 text-lg"&gt;æœ€é«˜ç´€éŒ„ï¼š&lt;span id="high-score-start" class="font-bold"&gt;0&lt;/span&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;!-- é—œå¡é¸æ“‡ç•«é¢ --&gt;</p>
<p class="p1">&lt;div id="level-selection-screen" class="modal-overlay hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div class="bg-white p-6 rounded-xl shadow-lg w-11/12 max-w-lg text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;h2 class="text-2xl font-bold text-slate-800 mb-4"&gt;é¸æ“‡é—œå¡ (å››å¹´ç´š)&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div id="level-grid" class="grid grid-cols-4 md:grid-cols-6 gap-3 max-h-[60vh] overflow-y-auto p-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;!-- é—œå¡æŒ‰éˆ•å°‡ç”± JS å‹•æ…‹ç”Ÿæˆ --&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;button id="close-level-selection-btn" class="mt-4 bg-slate-500 hover:bg-slate-600 text-white font-bold py-2 px-8 rounded-lg text-lg transition"&gt;è¿”å›&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;!-- é—œå¡çµæŸ/æ™‰ç´šå½ˆçª— --&gt;</p>
<p class="p1">&lt;div id="level-end-screen" class="modal-overlay hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div class="bg-white p-8 rounded-xl shadow-lg text-center w-11/12 max-w-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;h2 id="level-end-title" class="text-3xl font-bold text-slate-800 mb-4"&gt;&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;p id="level-end-score" class="text-xl text-slate-600 mb-6"&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="flex flex-col space-y-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;button id="review-mistakes-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg transition"&gt;éŒ¯å­—å›æ†¶&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;button id="next-level-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition"&gt;ä¸‹ä¸€é—œ&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;button id="end-game-btn" class="bg-slate-500 hover:bg-slate-600 text-white font-bold py-2 px-4 rounded-lg transition"&gt;çµæŸéŠæˆ²&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;!-- éŒ¯å­—å›æ†¶å½ˆçª— --&gt;</p>
<p class="p1">&lt;div id="review-screen" class="modal-overlay hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â Â  Â  </span>&lt;div class="bg-white p-6 rounded-xl shadow-lg w-11/12 max-w-md text-left overflow-y-auto max-h-[80vh]"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;h2 class="text-2xl font-bold text-slate-800 mb-4 text-center"&gt;éŒ¯å­—å›æ†¶&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div id="mistakes-list" class="space-y-3"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;button id="close-review-btn" class="w-full mt-4 bg-slate-500 hover:bg-slate-600 text-white font-bold py-2 px-4 rounded-lg transition"&gt;é—œé–‰&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;!-- éŠæˆ²çµæŸç•«é¢ --&gt;</p>
<p class="p1">&lt;div id="game-over-screen" class="modal-overlay hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div class="bg-white p-8 rounded-xl shadow-lg text-center w-11/12 max-w-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;h2 class="text-3xl font-bold text-slate-800 mb-2"&gt;æŒ‘æˆ°å®Œæˆï¼&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;p class="text-xl text-slate-600 mb-4"&gt;ä½ çš„æœ€çµ‚å¾—åˆ†æ˜¯ï¼š&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;p id="final-score" class="text-6xl font-extrabold text-yellow-500 mb-6"&gt;0&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;p id="new-high-score-msg" class="hidden text-green-500 font-bold text-lg mb-4"&gt;æ­å–œï¼åˆ·æ–°æœ€é«˜ç´€éŒ„ï¼&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div id="ai-feedback-container" class="my-4 p-3 bg-blue-50 rounded-lg border border-blue-200 text-blue-800"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;p id="ai-feedback-text"&gt;AI å¤¥ä¼´æ­£åœ¨ç‚ºæ‚¨æº–å‚™é¼“å‹µçš„è©±...&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;p class="text-slate-600 mb-4"&gt;æœ€é«˜ç´€éŒ„ï¼š&lt;span id="high-score-end"&gt;0&lt;/span&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div id="stars" class="flex justify-center text-5xl mb-6"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;button id="restart-btn" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition"&gt;è¿”å›ä¸»é¸å–®&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;!-- è¨­å®šå½ˆçª— --&gt;</p>
<p class="p1">&lt;div id="settings-screen" class="modal-overlay hidden"&gt;</p>
<p class="p1">&lt;div class="bg-white p-6 rounded-xl shadow-lg w-11/12 max-w-md text-center overflow-y-auto max-h-[90vh]"&gt;</p>
<p class="p1">&lt;h2 class="text-2xl font-bold text-slate-800 mb-4"&gt;éŠæˆ²è¨­å®š&lt;/h2&gt;</p>
<p class="p1">&lt;div class="mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;h3 class="text-lg font-semibold text-slate-700 mb-3"&gt;åŒ¯å…¥/åŒ¯å‡ºé¡Œåº«&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div class="flex space-x-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;button id="import-excel-btn" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition"&gt;å°å…¥é¡Œåº« (Excel)&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;button id="export-excel-btn" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition"&gt;å°å‡ºé¡Œåº« (Excel)&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;input type="file" id="excel-upload-input" class="hidden" accept=".xlsx, .xls"&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p1">&lt;hr class="my-4 border-slate-200"&gt;</p>
<p class="p1">&lt;div class="mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;h3 class="text-lg font-semibold text-slate-700 mb-3"&gt;è‡ªå®šç¾©é¡Œåº«&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;div id="custom-library-list"&gt;&lt;p class="text-slate-400"&gt;å°šç„¡è‡ªå®šç¾©é¡Œç›®&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>&lt;button id="play-library-btn" class="w-full mt-3 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition" disabled&gt;é–‹å§‹é¡Œåº«æŒ‘æˆ°&lt;/button&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p1">&lt;hr class="my-4 border-slate-200"&gt;</p>
<p class="p1">&lt;div class="mb-4"&gt;</p>
<p class="p1">&lt;h3 class="text-lg font-semibold text-slate-700 mb-3"&gt;æ‰‹å‹•æ–°å¢é¡Œç›®&lt;/h3&gt;</p>
<p class="p1">&lt;textarea id="custom-levels-input" rows="3" class="w-full p-2 border border-slate-300 rounded-md text-left" placeholder="æ–°å¢é¡Œç›®åˆ°é¡Œåº«...&amp;#10;æ—¥:ç›®,æ›°&amp;#10;å…:å…”,é­š"&gt;&lt;/textarea&gt;</p>
<p class="p1">&lt;p id="custom-error-msg" class="text-red-500 text-sm mt-2 h-4"&gt;&lt;/p&gt;</p>
<p class="p1">&lt;button id="add-custom-btn" class="w-full mt-3 bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-8 rounded-lg text-lg transition"&gt;æ–°å¢åˆ°é¡Œåº«&lt;/button&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p1">&lt;button id="close-settings-btn" class="mt-4 bg-slate-500 hover:bg-slate-600 text-white font-bold py-2 px-8 rounded-lg text-lg transition"&gt;é—œé–‰&lt;/button&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">&lt;script&gt;</p>
<p class="p1">// ç«‹å³åŸ·è¡Œå‡½å¼ä»¥é¿å…å…¨åŸŸè®Šæ•¸æ±™æŸ“</p>
<p class="p1">(function() {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>// ç­‰å¾… DOM å®Œå…¨è¼‰å…¥</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>window.onload = function() {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// --- DOM å…ƒç´ ç²å– ---</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const startScreen = document.getElementById('start-screen');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const gameScreen = document.getElementById('game-screen');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const settingsScreen = document.getElementById('settings-screen');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const gameOverScreen = document.getElementById('game-over-screen');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const levelEndScreen = document.getElementById('level-end-screen');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const reviewScreen = document.getElementById('review-screen');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const levelSelectionScreen = document.getElementById('level-selection-screen');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const gameBoard = document.getElementById('game-board');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const settingsBtn = document.getElementById('settings-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const closeSettingsBtn = document.getElementById('close-settings-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const restartBtn = document.getElementById('restart-btn');</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// é–‹å§‹ç•«é¢</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const userSelectionView = document.getElementById('user-selection-view');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const mainMenuView = document.getElementById('main-menu-view');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const userSelect = document.getElementById('user-select');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const newUserInput = document.getElementById('new-user-name');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const addUserBtn = document.getElementById('add-user-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const confirmUserBtn = document.getElementById('confirm-user-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const currentUserEl = document.getElementById('current-user-name');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const practiceModeBtn = document.getElementById('practice-mode-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const timedModeBtn = document.getElementById('timed-mode-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const highScoreStartEl = document.getElementById('high-score-start');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// éŠæˆ²ç•«é¢</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const gameModeTitleEl = document.getElementById('game-mode-title');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const saveQuitBtn = document.getElementById('save-quit-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const targetCharEl = document.getElementById('target-char');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const scoreEl = document.getElementById('score');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const timerDisplay = document.getElementById('timer-display');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const timerEl = document.getElementById('timer');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const comboDisplay = document.getElementById('combo-display');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const comboEl = document.getElementById('combo');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const hitsDisplay = document.getElementById('hits-display');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const hitsEl = document.getElementById('hits');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const skillSlowBtn = document.getElementById('skill-slow');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const skillSlowTokensEl = document.getElementById('skill-slow-tokens');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// é—œå¡é¸æ“‡ç•«é¢</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const levelGrid = document.getElementById('level-grid');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const closeLevelSelectionBtn = document.getElementById('close-level-selection-btn');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// çµæŸèˆ‡å›é¡§ç•«é¢</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const levelEndTitle = document.getElementById('level-end-title');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const levelEndScore = document.getElementById('level-end-score');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const reviewMistakesBtn = document.getElementById('review-mistakes-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const nextLevelBtn = document.getElementById('next-level-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const endGameBtn = document.getElementById('end-game-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const mistakesListEl = document.getElementById('mistakes-list');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const closeReviewBtn = document.getElementById('close-review-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const finalScoreEl = document.getElementById('final-score');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const newHighScoreMsgEl = document.getElementById('new-high-score-msg');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const highScoreEndEl = document.getElementById('high-score-end');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const starsEl = document.getElementById('stars');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const aiFeedbackText = document.getElementById('ai-feedback-text');</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// è¨­å®šç•«é¢</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const customLibraryList = document.getElementById('custom-library-list');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const playLibraryBtn = document.getElementById('play-library-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const customLevelsInput = document.getElementById('custom-levels-input');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const customErrorMsg = document.getElementById('custom-error-msg');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const addCustomBtn = document.getElementById('add-custom-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const importExcelBtn = document.getElementById('import-excel-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const exportExcelBtn = document.getElementById('export-excel-btn');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const excelUploadInput = document.getElementById('excel-upload-input');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let holes = [];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// --- éŠæˆ²ç‹€æ…‹èˆ‡è¨­å®š ---</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let gameState = {};</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let currentUser = null;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let gameData = {};</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let timerId = null, animalIntervalId = null;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let allMistakesInGame = [];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// --- å…§å»ºå››å¹´ç´šé—œå¡ ---</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const gradeFourLevels = [</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'æŠ„', distractors: ['æ²™', 'å¦™', 'ç´—'] }, { target: 'æ²™', distractors: ['æŠ„', 'å¦™', 'ç´—'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'åˆ¸', distractors: ['å·', 'å€¦', 'æ²'] }, { target: 'å·', distractors: ['åˆ¸', 'å€¦', 'æ²'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'æ± ', distractors: ['æ–½', 'å¼›', 'é¦³'] }, { target: 'æ–½', distractors: ['æ± ', 'å¼›', 'é¦³'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'å¥„', distractors: ['æ©', 'æ·¹', 'åºµ'] }, { target: 'æ©', distractors: ['å¥„', 'æ·¹', 'åºµ'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'å»·', distractors: ['å»¶', 'èª•', 'èœ’'] }, { target: 'å»¶', distractors: ['å»·', 'èª•', 'èœ’'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'æ»”', distractors: ['ç¨»', 'è¹ˆ', 'ç„°'] }, { target: 'ç¨»', distractors: ['æ»”', 'è¹ˆ', 'ç„°'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'é ’', distractors: ['é Œ', 'é ˜', 'é '] }, { target: 'é Œ', distractors: ['é ’', 'é ˜', 'é '] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'æ„‰', distractors: ['å·', 'å–»', 'è¼¸'] }, { target: 'å·', distractors: ['æ„‰', 'å–»', 'è¼¸'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'ç›¸', distractors: ['ç®±', 'å»‚', 'éœœ'] }, { target: 'ç®±', distractors: ['ç›¸', 'å»‚', 'éœœ'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'æ–', distractors: ['é™', 'ç‘¤', 'è¬ '] }, { target: 'é™', distractors: ['æ–', 'ç‘¤', 'è¬ '] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'æ²¹', distractors: ['æŠ½', 'è¿ª', 'è¢–'] }, { target: 'æŠ½', distractors: ['æ²¹', 'è¿ª', 'è¢–'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'å¢', distractors: ['è´ˆ', 'æ†', 'åƒ§'] }, { target: 'è´ˆ', distractors: ['å¢', 'æ†', 'åƒ§'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'ä½œ', distractors: ['æ˜¨', 'è©', 'ä¹'] }, { target: 'æ˜¨', distractors: ['ä½œ', 'è©', 'ä¹'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'è­˜', distractors: ['ç¹”', 'è·', 'å¹Ÿ'] }, { target: 'ç¹”', distractors: ['è­˜', 'è·', 'å¹Ÿ'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'å ', distractors: ['åº—', 'ä½”', 'æ²¾'] }, { target: 'åº—', distractors: ['å ', 'ä½”', 'æ²¾'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'æŸ', distractors: ['è¬€', 'åª’', 'ç…¤'] }, { target: 'è¬€', distractors: ['æŸ', 'åª’', 'ç…¤'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'å‰‡', distractors: ['æ¸¬', 'å´', 'æƒ»'] }, { target: 'æ¸¬', distractors: ['å‰‡', 'å´', 'æƒ»'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'çŸ£', distractors: ['å”‰', 'åŸƒ', 'æŒ¨'] }, { target: 'å”‰', distractors: ['çŸ£', 'åŸƒ', 'æŒ¨'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'å®¹', distractors: ['æº¶', 'ç†”', 'æ¦•'] }, { target: 'æº¶', distractors: ['å®¹', 'ç†”', 'æ¦•'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'å®—', distractors: ['ç¶œ', 'æ·™', 'å´‡'] }, { target: 'ç¶œ', distractors: ['å®—', 'æ·™', 'å´‡'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'ç´™', distractors: ['ä½', 'åº•', 'æŠµ'] }, { target: 'ä½', distractors: ['ç´™', 'åº•', 'æŠµ'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'é‚£', distractors: ['å“ª', 'æŒª', 'å¨œ'] }, { target: 'å“ª', distractors: ['é‚£', 'æŒª', 'å¨œ'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'æ·‘', distractors: ['æ¤’', 'å¯‚', 'ç£'] }, { target: 'æ¤’', distractors: ['æ·‘', 'å¯‚', 'ç£'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'å®˜', distractors: ['å®®', 'ç‡Ÿ', 'ä¾¶'] }, { target: 'å®®', distractors: ['å®˜', 'ç‡Ÿ', 'ä¾¶'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'èª', distractors: ['æ¢§', 'æ‚Ÿ', 'æ‚'] }, { target: 'æ¢§', distractors: ['èª', 'æ‚Ÿ', 'æ‚'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'å¥´', distractors: ['åŠª', 'æ€’', 'æ•'] }, { target: 'åŠª', distractors: ['å¥´', 'æ€’', 'æ•'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'æ­¡', distractors: ['å‹¸', 'è§€', 'çŒ'] }, { target: 'å‹¸', distractors: ['æ­¡', 'è§€', 'çŒ'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'æ¨', distractors: ['å †', 'ç¨š', 'æƒŸ'] }, { target: 'å †', distractors: ['æ¨', 'ç¨š', 'æƒŸ'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'å±ˆ', distractors: ['æ˜', 'å€”', 'å´›'] }, { target: 'æ˜', distractors: ['å±ˆ', 'å€”', 'å´›'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'æ´', distractors: ['ç·©', 'æš–', 'åª›'] }, { target: 'ç·©', distractors: ['æ´', 'æš–', 'åª›'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'å¹»', distractors: ['å¹¼', 'æ‹—', 'å³'] }, { target: 'å¹¼', distractors: ['å¹»', 'æ‹—', 'å³'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'è´Š', distractors: ['è®š', 'é‘½', 'æ”¢'] }, { target: 'è®š', distractors: ['è´Š', 'é‘½', 'æ”¢'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'ç« ', distractors: ['éšœ', 'å½°', 'èŸ‘'] }, { target: 'éšœ', distractors: ['ç« ', 'å½°', 'èŸ‘'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'ç ', distractors: ['æ ª', 'æ®Š', 'è››'] }, { target: 'æ ª', distractors: ['ç ', 'æ®Š', 'è››'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'æ–¬', distractors: ['æ¼¸', 'å¶„', 'æš«'] }, { target: 'æ¼¸', distractors: ['æ–¬', 'å¶„', 'æš«'] },</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ target: 'ä¾›', distractors: ['å“„', 'æ´ª', 'æ‹±'] }, { target: 'å“„', distractors: ['ä¾›', 'æ´ª', 'æ‹±'] }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>];</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const animalSVGs = {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>mole: `&lt;svg class="animal-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path d="M50 95 C 80 100, 85 70, 85 50 C 85 20, 75 5, 50 5 C 25 5, 15 20, 15 50 C 15 70, 20 100, 50 95 Z" fill="#8D6E63"/&gt;&lt;circle cx="35" cy="45" r="5" fill="black"/&gt;&lt;circle cx="65" cy="45" r="5" fill="black"/&gt;&lt;path d="M45 60 Q 50 70, 55 60" stroke="black" fill="none" stroke-width="3" stroke-linecap="round"/&gt;&lt;ellipse cx="50" cy="30" rx="15" ry="8" fill="#FBC02D"/&gt;&lt;/svg&gt;`,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>rabbit: `&lt;svg class="animal-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path d="M 50,90 C 75,95 80,70 80,50 C 80,25 70,10 50,10 C 30,10 20,25 20,50 C 20,70 25,95 50,90 Z" fill="white" stroke="#E0E0E0" stroke-width="2" /&gt;&lt;path d="M 35,15 C 30,0 45,0 40,15 C 40,30 35,30 35,15 Z" fill="white" stroke="#E0E0E0" stroke-width="2" transform="rotate(-15 37 15)"/&gt;&lt;path d="M 65,15 C 70,0 55,0 60,15 C 60,30 65,30 65,15 Z" fill="white" stroke="#E0E0E0" stroke-width="2" transform="rotate(15 63 15)"/&gt;&lt;circle cx="40" cy="50" r="4" fill="black"/&gt;&lt;circle cx="60" cy="50" r="4" fill="black"/&gt;&lt;path d="M 48 60 L 52 60 M 50 60 L 50 65" stroke="#FF8A80" stroke-width="2" stroke-linecap="round"/&gt;&lt;/svg&gt;`,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>cat: `&lt;svg class="animal-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path d="M20 90 C 10 70, 10 30, 30 20 L 50 10 L 70 20 C 90 30, 90 70, 80 90 Z" fill="#FFC107" /&gt;&lt;path d="M30 20 L 20 5 L 40 15 Z" fill="#FF9800" /&gt;&lt;path d="M70 20 L 80 5 L 60 15 Z" fill="#FF9800"/&gt;&lt;circle cx="38" cy="55" r="5" fill="black"/&gt;&lt;circle cx="62" cy="55" r="5" fill="black"/&gt;&lt;path d="M45 65 Q 50 75, 55 65" stroke="black" fill="none" stroke-width="2" stroke-linecap="round"/&gt;&lt;/svg&gt;`,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>bear: `&lt;svg class="animal-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"&gt;&lt;circle cx="50" cy="55" r="35" fill="#A1887F"/&gt;&lt;circle cx="30" cy="25" r="12" fill="#A1887F"/&gt;&lt;circle cx="70" cy="25" r="12" fill="#A1887F"/&gt;&lt;circle cx="30" cy="25" r="8" fill="#D7CCC8"/&gt;&lt;circle cx="70" cy="25" r="8" fill="#D7CCC8"/&gt;&lt;circle cx="50" cy="60" r="15" fill="#D7CCC8"/&gt;&lt;circle cx="38" cy="50" r="4" fill="black"/&gt;&lt;circle cx="62" cy="50" r="4" fill="black"/&gt;&lt;path d="M50 65 C 45 72, 55 72, 50 65 Z" fill="black"/&gt;&lt;/svg&gt;`</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// éŸ³æ•ˆ</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let correctSound, incorrectSound, levelUpSound;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>try {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>correctSound = new Tone.Synth().toDestination();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>incorrectSound = new Tone.Synth({ oscillator: { type: 'square' } }).toDestination();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>levelUpSound = new Tone.Synth({ oscillator: { type: 'sawtooth' } }).toDestination();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} catch(e) { console.warn("Tone.js åˆå§‹åŒ–å¤±æ•—ï¼ŒéŸ³æ•ˆå°‡è¢«ç¦ç”¨ã€‚") }</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// --- æ ¸å¿ƒéŠæˆ²é‚è¼¯ ---</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>function createBoard() {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>gameBoard.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>for (let i = 0; i &lt; 9; i++) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>const hole = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>hole.classList.add('hole');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>const animalContainer = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>animalContainer.classList.add('animal-container');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>animalContainer.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="animal-svg-wrapper"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="character"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>`;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>hole.appendChild(animalContainer);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>gameBoard.appendChild(hole);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>animalContainer.addEventListener('click', handleWhack);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>function startGame(mode, levels, startIndex = 0) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>startScreen.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>gameScreen.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>allMistakesInGame = [];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>let gameLevels = levels;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>// In timed mode, we shuffle for replayability.</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (mode === 'timed') {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>gameLevels = [...levels].sort(() =&gt; Math.random() - 0.5);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>// Restore skills if continuing, otherwise start fresh</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const initialSkills = (gameData.users[currentUser].skillTokens)<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>? gameData.users[currentUser].skillTokens<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>: 0;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>gameState = {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>mode: mode,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>levelList: gameLevels,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>currentLevelIndex: startIndex,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>score: 0,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>combo: 0,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>timeLeft: 60,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>slowSkillTokens: initialSkills,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>correctHitsThisLevel: 0,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>mistakesThisLevel: [],</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>gameSpeed: 1200, // å›ºå®šé€Ÿåº¦</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>peepDuration: 1800, // å›ºå®šé€Ÿåº¦</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>// æ ¹æ“šæ¨¡å¼èª¿æ•´UI</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (mode === 'practice') {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>timerDisplay.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>hitsDisplay.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>comboDisplay.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>saveQuitBtn.textContent = 'é›¢é–‹éŠæˆ²';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>} else { // timed</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>timerDisplay.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>hitsDisplay.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>comboDisplay.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>gameModeTitleEl.textContent = 'è¨ˆæ™‚æ¯”è³½ (å››å¹´ç´š)';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>saveQuitBtn.textContent = 'å„²å­˜ä¸¦é›¢é–‹';</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>timerId = setInterval(updateTimer, 1000);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>setupLevel();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>function setupLevel() {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (gameState.currentLevelIndex &gt;= gameState.levelList.length) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>if (gameState.mode === 'timed') {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>// In timed mode, just loop back</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>gameState.currentLevelIndex = 0;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>// In practice mode, end game</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>endGame(false);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>return;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>gameState.correctHitsThisLevel = 0;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>gameState.mistakesThisLevel = [];</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>updateUI();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>clearInterval(animalIntervalId);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>animalIntervalId = setInterval(peep, gameState.gameSpeed);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>function updateTimer() {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>gameState.timeLeft--;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (gameState.timeLeft &lt;= 0) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>clearInterval(timerId);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>timerId = null;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>showLevelEndScreen(true); // æ™‚é–“åˆ°ï¼Œå¼·åˆ¶çµæŸ</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>updateUI();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>function handleWhack(e) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const animalContainer = e.currentTarget;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (correctSound &amp;&amp; Tone.context.state !== 'running') Tone.context.resume();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (!animalContainer.classList.contains('up')) return;</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>animalContainer.classList.remove('up');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>animalContainer.classList.add('whacked');</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const currentLevel = gameState.levelList[gameState.currentLevelIndex];</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (animalContainer.dataset.char === currentLevel.target) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>gameState.combo++;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>const points = 10 + Math.min(gameState.combo, 10);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>gameState.score += points;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>gameState.correctHitsThisLevel++;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>if (correctSound) correctSound.triggerAttackRelease('C5', '8n');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>showScorePopup(`+${points}`, animalContainer, 'text-green-500');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>showHammerAnimation(animalContainer);</p>
<p class="p2"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>if (gameState.mode === 'practice' &amp;&amp; gameState.correctHitsThisLevel &gt;= 3) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>showLevelEndScreen(false); // æ™‰ç´š</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>} else if (gameState.mode === 'timed') {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>// Reward skill on combo</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (gameState.combo &gt; 0 &amp;&amp; gameState.combo % 5 === 0) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>gameState.slowSkillTokens++;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>switchToNextTarget();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>gameState.combo = 0;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>gameState.score = Math.max(0, gameState.score - 5);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>const mistake = {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>target: currentLevel.target,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>wrong: animalContainer.dataset.char</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>};</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>gameState.mistakesThisLevel.push(mistake);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>allMistakesInGame.push(mistake);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>if (incorrectSound) incorrectSound.triggerAttackRelease('A2', '8n');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>showScorePopup('-5', animalContainer, 'text-red-500');</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>updateUI();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>function switchToNextTarget() {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>gameState.currentLevelIndex++;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (gameState.currentLevelIndex &gt;= gameState.levelList.length)<span class="Apple-converted-space">Â </span></p>
</body>
</html>
